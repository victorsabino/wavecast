<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="/src/styles-new.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bulk Video Audio Processor</title>
    <script type="module" src="/src/main.ts" defer></script>
  </head>

  <body>
    <!-- Top Navigation Bar -->
    <nav class="top-nav">
      <div class="nav-left">
        <h1 class="app-title">ðŸŽµ Bulk Video Audio Processor</h1>
        <span class="version">v1.0</span>
      </div>
      <div class="nav-right">
        <button class="nav-btn" id="help-btn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
            <line x1="12" y1="17" x2="12.01" y2="17"/>
          </svg>
          Help
        </button>
        <button class="nav-btn" id="settings-btn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M12 1v6m0 6v6"/>
          </svg>
          Settings
        </button>
      </div>
    </nav>

    <!-- Main Workflow -->
    <main class="workflow">

      <!-- STEP 1: Upload Videos -->
      <section class="workflow-step" id="step-videos">
        <div class="step-header">
          <div class="step-number">1</div>
          <div class="step-info">
            <h2>Videos</h2>
            <p class="step-desc">Add your videos (MP4, MOV, etc.)</p>
          </div>
          <div class="step-stats">
            <span class="stat-badge" id="video-count">0 videos</span>
          </div>
        </div>

        <div class="drop-zone" id="video-drop-zone">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <rect x="2" y="2" width="20" height="20" rx="2"/>
            <path d="M12 8v8m-4-4h8"/>
          </svg>
          <h3>Drop videos here or click to browse</h3>
          <p>Supports MP4, MOV, AVI, MKV â€¢ Max 500 files</p>
          <button class="primary-btn" id="browse-videos-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7 10 12 15 17 10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
            Browse Files
          </button>
        </div>

        <!-- Video List (appears after upload) -->
        <div class="file-list" id="video-list" style="display: none;">
          <div class="list-header">
            <div class="list-actions">
              <button class="icon-btn" id="add-more-videos">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="12" y1="5" x2="12" y2="19"/>
                  <line x1="5" y1="12" x2="19" y2="12"/>
                </svg>
                Add More
              </button>
              <button class="icon-btn danger" id="clear-videos">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="3 6 5 6 21 6"/>
                  <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                </svg>
                Clear All
              </button>
            </div>
          </div>
          <div class="scrollable-list" id="videos-table">
            <!-- Videos will be populated here -->
          </div>
        </div>
      </section>

      <!-- STEP 2: Music Pool -->
      <section class="workflow-step" id="step-music">
        <div class="step-header">
          <div class="step-number">2</div>
          <div class="step-info">
            <h2>Music Pool</h2>
            <p class="step-desc">Add music tracks (random assignment)</p>
          </div>
          <div class="step-stats">
            <span class="stat-badge" id="music-count">0 tracks</span>
          </div>
        </div>

        <div class="drop-zone" id="music-drop-zone">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M9 18V5l12-2v13"/>
            <circle cx="6" cy="18" r="3"/>
            <circle cx="18" cy="16" r="3"/>
          </svg>
          <h3>Drop music files here</h3>
          <p>Supports MP3, WAV, M4A â€¢ Will be randomly assigned</p>
          <button class="primary-btn" id="browse-music-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 18V5l12-2v13"/>
              <circle cx="6" cy="18" r="3"/>
              <circle cx="18" cy="16" r="3"/>
            </svg>
            Browse Music
          </button>
        </div>

        <!-- Music List -->
        <div class="file-list" id="music-list" style="display: none;">
          <div class="list-header">
            <div class="music-mode-toggle">
              <label class="toggle-label">
                <input type="checkbox" id="random-mode-toggle" checked>
                <span class="toggle-slider"></span>
                <span class="toggle-text">Random Assignment</span>
              </label>
            </div>
            <div class="list-actions">
              <button class="icon-btn" id="add-more-music">+ Add More</button>
              <button class="icon-btn danger" id="clear-music">Clear All</button>
            </div>
          </div>
          <div class="scrollable-list" id="music-table">
            <!-- Music tracks will be populated here -->
          </div>
        </div>
      </section>

      <!-- STEP 3: Background Setup -->
      <section class="workflow-step" id="step-background">
        <div class="step-header">
          <div class="step-number">3</div>
          <div class="step-info">
            <h2>Background</h2>
            <p class="step-desc">Choose image or solid color</p>
          </div>
        </div>

        <div class="background-selector">
          <div class="bg-tabs">
            <button class="bg-tab active" data-tab="image">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2"/>
                <circle cx="8.5" cy="8.5" r="1.5"/>
                <polyline points="21 15 16 10 5 21"/>
              </svg>
              Image
            </button>
            <button class="bg-tab" data-tab="color">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
              </svg>
              Solid Color
            </button>
          </div>

          <!-- Image Tab -->
          <div class="bg-content active" id="bg-image-content">
            <div class="drop-zone compact" id="image-drop-zone">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <rect x="3" y="3" width="18" height="18" rx="2"/>
                <circle cx="8.5" cy="8.5" r="1.5"/>
                <polyline points="21 15 16 10 5 21"/>
              </svg>
              <button class="secondary-btn" id="browse-image-btn">Browse Image</button>
              <img id="bg-image-preview" class="bg-preview-img" style="display: none;">
            </div>
            <div class="bg-options" id="image-options" style="display: none;">
              <label>Background Style:</label>
              <select id="background-style">
                <option value="cover">Fill (Cover)</option>
                <option value="contain">Fit (Contain)</option>
                <option value="repeat">Repeat</option>
                <option value="center">Center</option>
              </select>
            </div>
          </div>

          <!-- Color Tab -->
          <div class="bg-content" id="bg-color-content">
            <div class="color-picker-wrapper">
              <input type="color" id="bg-color-picker" value="#667eea">
              <div class="color-presets">
                <button class="color-preset" style="background: #667eea" data-color="#667eea"></button>
                <button class="color-preset" style="background: #764ba2" data-color="#764ba2"></button>
                <button class="color-preset" style="background: #f093fb" data-color="#f093fb"></button>
                <button class="color-preset" style="background: #4facfe" data-color="#4facfe"></button>
                <button class="color-preset" style="background: #43e97b" data-color="#43e97b"></button>
                <button class="color-preset" style="background: #fa709a" data-color="#fa709a"></button>
                <button class="color-preset" style="background: #30cfd0" data-color="#30cfd0"></button>
                <button class="color-preset" style="background: #000000" data-color="#000000"></button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- STEP 4: Bulk Metadata Editor -->
      <section class="workflow-step full-width" id="step-metadata">
        <div class="step-header">
          <div class="step-number">4</div>
          <div class="step-info">
            <h2>Video Metadata</h2>
            <p class="step-desc">Edit titles & descriptions for all videos</p>
          </div>
          <div class="step-actions">
            <button class="secondary-btn" id="auto-fill-metadata">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
                <line x1="12" y1="22.08" x2="12" y2="12"/>
              </svg>
              Auto-fill from Filenames
            </button>
            <button class="secondary-btn" id="use-template">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="16" y1="13" x2="8" y2="13"/>
                <line x1="16" y1="17" x2="8" y2="17"/>
                <polyline points="10 9 9 9 8 9"/>
              </svg>
              Use Template
            </button>
          </div>
        </div>

        <!-- Metadata Table -->
        <div class="metadata-table-container">
          <table class="metadata-table" id="metadata-table">
            <thead>
              <tr>
                <th style="width: 40px">#</th>
                <th style="width: 200px">Filename</th>
                <th style="width: 200px">Music Track</th>
                <th>Title</th>
                <th style="width: 250px">Description</th>
                <th style="width: 100px">Actions</th>
              </tr>
            </thead>
            <tbody id="metadata-tbody">
              <!-- Rows will be populated dynamically -->
            </tbody>
          </table>
        </div>
      </section>

    </main>

    <!-- Bottom Action Bar -->
    <footer class="action-bar">
      <div class="action-bar-left">
        <button class="text-btn" id="reset-all">Reset All</button>
        <span class="status-text" id="status-text">Ready to process</span>
      </div>
      <div class="action-bar-right">
        <div class="export-settings">
          <label>Format:</label>
          <select id="export-format">
            <option value="mp4">MP4 (H.264)</option>
            <option value="mov">MOV</option>
            <option value="webm">WebM</option>
          </select>
          <label>Quality:</label>
          <select id="export-quality">
            <option value="high">High</option>
            <option value="medium" selected>Medium</option>
            <option value="low">Low</option>
          </select>
        </div>
        <button class="cta-btn" id="process-all-btn" disabled>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="12 6 12 12 16 14"/>
          </svg>
          Process All Videos
          <span class="btn-badge" id="process-count">0</span>
        </button>
      </div>
    </footer>

    <!-- Progress Overlay -->
    <div id="progress-overlay" class="progress-overlay" style="display: none;">
      <div class="progress-modal">
        <h2>Processing Videos...</h2>
        <div class="progress-stats">
          <span id="current-video">Processing video 1 of 60</span>
          <span id="estimated-time">Estimated time: 5 minutes</span>
        </div>
        <div class="progress-bar-wrapper">
          <div class="progress-bar-fill" id="progress-bar-fill" style="width: 0%"></div>
        </div>
        <p class="progress-percentage" id="progress-percentage">0%</p>
        <p class="progress-details" id="progress-details">Starting export...</p>
        <button class="secondary-btn" id="cancel-process">Cancel</button>
      </div>
    </div>

    <!-- Settings Modal (reuse existing) -->
    <div id="settings-modal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Settings</h2>
          <button id="close-modal" class="close-btn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/>
              <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <div class="setting-section">
            <h3>Export Settings</h3>
            <div class="form-group">
              <label>Default Output Directory</label>
              <input type="text" placeholder="/Users/me/Videos/Output" />
            </div>
            <div class="form-group">
              <label>
                <input type="checkbox" checked>
                Open output folder after processing
              </label>
            </div>
          </div>
          <div class="setting-section">
            <h3>Performance</h3>
            <div class="form-group">
              <label>Max Concurrent Processes</label>
              <select>
                <option value="1">1 (Slower, less CPU)</option>
                <option value="2" selected>2 (Balanced)</option>
                <option value="4">4 (Faster, more CPU)</option>
              </select>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button id="save-settings" class="primary-btn">Save Settings</button>
        </div>
      </div>
    </div>

  </body>
</html>
